<!DOCTYPE html>

<html>
<head>
<style>
	p.a {font-family: Georgia, serif;}
	body {background-color: PowderBlue;}
	h1 {text-align:center; font-family: Georgia, sans-serif;}
	h3 {font-family: Georgia, sans-serif;}
</style>
	<title>Ping-Pong Delay</title>
</head>
<body>

<h1>Ping-Pong Delay with Tone. JS</h1>
	
<br>
	
<h3>This is a ping-pong delay effect.  Experiment with controlling the delay time by moving the slider around.</h3>
	
<div class="buttons">	
<button id="play" class="play">Play</button>
<button id="stop" class="stop">Stop</button>
</div>

<br>
<br>

<p> Delay Time </p>
<input type="range" min="0" max="1" value="0.5" class="slider" id="delaySlider">
	 <p class="a">Delay Time: <span id="demo"></span> s </p>

<br>
<br>

<p> Amount of Feedback </p>
<input type="range" min="0" max="1" value="0.5" class="slider" id="feedbackSlider">
	 <p class="a">Amount of Feedback: <span id="demo2"></span></p>

<script src="Tone.min.js"></script>

	<script>
		var slider1 = document.getElementById("delaySlider");
		slider1.step = ".01";
		slider1.addEventListener("click",updatedelayVal)
		

		var output1 = document.getElementById("demo");
		output1.innerHTML = slider1.value;
		

		var slider2 = document.getElementById("feedbackSlider");
		slider2.step = ".01";
		slider2.addEventListener("click", updatefeedbackVal)

		var output2 = document.getElementById("demo2");
		output2.innerHTML = slider2.value;
		
		var arg1 = .5;
		var arg2 = .2;

		var player = new Tone.Player("https://raw.githubusercontent.com/mf3180/mf3180.github.io/master/Crimewave.mp3").toMaster();
		
		var pingPong = new Tone.PingPongDelay(arg1, arg2).toMaster();
		player.connect(pingPong);
		
		var playbutton = document.getElementById("play");
		playbutton.addEventListener("click", pingpongPlay);

		var stopbutton = document.getElementById("stop");
		stopbutton.addEventListener("click", pingpongStop);

		slider1.oninput = function() {
			output1.innerHTML = this.value;
		}
		
		slider2.oninput = function() {
			output2.innerHTML = this.value;
		}
		
		function pingpongPlay() {
			player.start();

		}

		function pingpongStop() {
			player.stop();
		}

		function updatedelayVal(){
			arg1 = slider1.value;
			pingPong.delayTime.value = arg1;
			console.log(pingPong.delayTime.value);
		}

		function updatefeedbackVal(){
			arg1 = slider2.value;
			pingPong.feedback.value = arg1;
			console.log(pingPong.feedback.value);
		}

</script>


</body>

</html>
