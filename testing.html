<!DOCTYPE html>
<html>
<body>
  <h1>Delay with Feedback and more</h1>

<br>
<br>

<div class="controls">
    <button class="play" disabled>loading...</button>
    <button class="stop" disabled>stop</button>
        </div>

<script>
var audioContext = new(window.AudioContext || window.webkitAudioContext)();
var soundAudio = 'Crimewave.mp3';
var sampleBuffers;
var sound;
var playButton = document.querySelector(".play");
var stopButton = document.querySelector(".stop");

//this function loads the sound
init();

function init() {
	loadSound(soundAudio);
}

playButton.onclick = function () {
    playSound();
};

stopButton.onclick = function () {
    stopSound();
};


//this function loads the sound
function loadSound(url) {
	var request = new XMLHttpRequest();
	request.open("GET", url, true);
	request.responseType = "arraybuffer";

	request.onload = function() {

		audioContext.decodeAudioData(request.response, function(buffer){
			sampleBuffer = buffer;
			playButton.innerHTML = 'play';
		});
	};

	request.send();
}

//this function sets up the sound
//needs to run when webpage loads to load audio buffer
function setupSound() {
	sound = audioContext.createBufferSource();
	sound.buffer = sampleBuffer;
	sound.loop = loop;
	source.connect(audioCtx.destination);
}

//this function plays the audio & enables/disables buttons
function playSound() {
	sound.start();
}

//this function stops the sound and enables/disables buttons

function stopSound() {
	sound.stop();
}
</script>
</body>
</html>
